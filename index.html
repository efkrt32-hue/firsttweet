<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>First Tweet Finder</title>
<style>
body { font-family: Arial; padding: 20px; background:#f5f5f5; }
input, button { padding: 12px; font-size: 16px; width: 100%; margin-top: 10px; border-radius:8px; border:1px solid #ccc; }
#log { margin-top: 20px; font-size: 14px; white-space: pre-wrap; }
.container { max-width: 600px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 0 12px rgba(0,0,0,0.1); }
button { background:black; color:white; border:none; }
</style>
</head>
<body>

<div class="container">
<h2>First Tweet Finder</h2>
<p>Aramak istediğin kelimeyi yaz → En eski tweet yılını bulayım.</p>

<input id="keyword" placeholder="ör: araba">
<button onclick="start()">Ara</button>

<div id="log"></div>
</div>

<script>
async function checkTweets(keyword, since, until) {

    const url =
      "https://corsproxy.io/?" +
      encodeURIComponent(`https://x.com/search?q=${encodeURIComponent(keyword)} since:${since} until:${until}&src=typed_query&f=live`);

    const html = await fetch(url).then(r => r.text());

    // X'in yeni mobil HTML tweet işaretleyicisi
    return html.includes("data-testid=\"tweetText\"");
}

async function start() {
    const keyword = document.getElementById("keyword").value.trim();
    const log = document.getElementById("log");
    log.textContent = "Arama başladı...\n";

    let startYear = 2006;
    let endYear = new Date().getFullYear();

    while (startYear <= endYear) {
        const mid = Math.floor((startYear + endYear) / 2);
        log.textContent += `Yıl taranıyor: ${mid}\n`;

        try {
            let found = await checkTweets(keyword, `${mid}-01-01`, `${mid}-12-31`);

            if (found) endYear = mid - 1;
            else startYear = mid + 1;

        } catch(err) {
            log.textContent += "Hata: Tekrar deniyorum...\n";
        }
    }

    log.textContent += `\nEn eski tweet yılı: ${startYear}\n\n`;
    log.textContent += `Link:\nhttps://x.com/search?q=${encodeURIComponent(keyword)} since:${startYear}-01-01&src=typed_query&f=live`;
}
</script>

</body>
</html>
